import { user } from "../users/users.legacy"
import {materialBundle}from "../materialbudles/materialbudles"
enum MaterialType {
  image
  file
  audio
  video
}

model material {
  id              Int               @id @default(autoincrement())
  type            MaterialType
  url             String
  name            String
  uploader        user              @relation(fields: [uploaderId], references: [id])
  uploaderId      Int
  createdAt       DateTime          @default(now()) @map("created_at") @db.Timestamptz(6)
  expires         Int?
  downloadCount   Int               @default(0) @map("download_count")
  materialBundles materialbundlesRelation[]
  /// [metaType]
  meta            Json              @db.Json
}

model materialbundlesRelation {
 
  material   material       @relation(fields: [materialId], references: [id])
  materialId Int
  bundle     materialBundle @relation(fields: [bundleId], references: [id],onDelete: Cascade)
  bundleId   Int

  @@id([materialId,bundleId])
}
